<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/app/src/main/java/com/example/accountable/AccessRequest.java">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/com/example/accountable/AccessRequest.java" />
              <option name="updatedContent" value="package com.example.accountable;&#10;&#10;public class AccessRequest {&#10;    private String requestId;&#10;    private String userId;&#10;    private String userName;&#10;    private String appPackage;&#10;    private String appName;&#10;    private long requestTime;&#10;    private long grantedDuration; // in minutes&#10;    private String status; // &quot;pending&quot;, &quot;granted&quot;, &quot;denied&quot;&#10;&#10;    public AccessRequest() {&#10;        // Required for Firebase&#10;    }&#10;&#10;    public AccessRequest(String userId, String userName, String appPackage, String appName) {&#10;        this.requestId = userId + &quot;_&quot; + System.currentTimeMillis();&#10;        this.userId = userId;&#10;        this.userName = userName;&#10;        this.appPackage = appPackage;&#10;        this.appName = appName;&#10;        this.requestTime = System.currentTimeMillis();&#10;        this.status = &quot;pending&quot;;&#10;    }&#10;&#10;    // Getters and Setters&#10;    public String getRequestId() { return requestId; }&#10;    public String getUserId() { return userId; }&#10;    public String getUserName() { return userName; }&#10;    public String getAppPackage() { return appPackage; }&#10;    public String getAppName() { return appName; }&#10;    public long getRequestTime() { return requestTime; }&#10;    public long getGrantedDuration() { return grantedDuration; }&#10;    public String getStatus() { return status; }&#10;&#10;    public void setGrantedDuration(long minutes) { this.grantedDuration = minutes; }&#10;    public void setStatus(String status) { this.status = status; }&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/java/com/example/accountable/AccessRequestActivity.java">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/com/example/accountable/AccessRequestActivity.java" />
              <option name="updatedContent" value="package com.example.accountable;&#10;&#10;import android.os.Bundle;&#10;import android.widget.Button;&#10;import android.widget.TextView;&#10;import android.widget.Toast;&#10;import androidx.appcompat.app.AppCompatActivity;&#10;import androidx.appcompat.widget.Toolbar;&#10;import com.google.android.material.textfield.TextInputEditText;&#10;import com.google.firebase.database.DatabaseReference;&#10;import com.google.firebase.database.FirebaseDatabase;&#10;import java.text.SimpleDateFormat;&#10;import java.util.Date;&#10;import java.util.Locale;&#10;&#10;public class AccessRequestActivity extends AppCompatActivity {&#10;    private DatabaseReference dbRef;&#10;    private String requestId;&#10;    private AccessRequest request;&#10;&#10;    @Override&#10;    protected void onCreate(Bundle savedInstanceState) {&#10;        super.onCreate(savedInstanceState);&#10;        setContentView(R.layout.activity_access_request);&#10;&#10;        Toolbar toolbar = findViewById(R.id.toolbar);&#10;        setSupportActionBar(toolbar);&#10;        if (getSupportActionBar() != null) {&#10;            getSupportActionBar().setDisplayHomeAsUpEnabled(true);&#10;        }&#10;&#10;        requestId = getIntent().getStringExtra(&quot;requestId&quot;);&#10;        dbRef = FirebaseDatabase.getInstance().getReference(&quot;requests&quot;).child(requestId);&#10;&#10;        TextView requestDetails = findViewById(R.id.requestDetails);&#10;        TextInputEditText timeInput = findViewById(R.id.timeInput);&#10;        Button grantButton = findViewById(R.id.grantButton);&#10;        Button denyButton = findViewById(R.id.denyButton);&#10;&#10;        dbRef.get().addOnSuccessListener(snapshot -&gt; {&#10;            request = snapshot.getValue(AccessRequest.class);&#10;            if (request != null) {&#10;                SimpleDateFormat sdf = new SimpleDateFormat(&quot;hh:mm a&quot;, Locale.getDefault());&#10;                String time = sdf.format(new Date(request.getRequestTime()));&#10;                &#10;                String details = String.format(&quot;%s wants to use %s\nRequested at: %s&quot;,&#10;                    request.getUserName(),&#10;                    request.getAppName(),&#10;                    time);&#10;                requestDetails.setText(details);&#10;            }&#10;        });&#10;&#10;        grantButton.setOnClickListener(v -&gt; {&#10;            String timeStr = timeInput.getText().toString();&#10;            if (timeStr.isEmpty()) {&#10;                Toast.makeText(this, &quot;Please enter time duration&quot;, Toast.LENGTH_SHORT).show();&#10;                return;&#10;            }&#10;&#10;            long duration = Long.parseLong(timeStr);&#10;            request.setStatus(&quot;granted&quot;);&#10;            request.setGrantedDuration(duration);&#10;            dbRef.setValue(request).addOnCompleteListener(task -&gt; {&#10;                if (task.isSuccessful()) {&#10;                    Toast.makeText(this, &quot;Access granted for &quot; + duration + &quot; minutes&quot;, &#10;                                 Toast.LENGTH_SHORT).show();&#10;                    finish();&#10;                }&#10;            });&#10;        });&#10;&#10;        denyButton.setOnClickListener(v -&gt; {&#10;            request.setStatus(&quot;denied&quot;);&#10;            dbRef.setValue(request).addOnCompleteListener(task -&gt; {&#10;                if (task.isSuccessful()) {&#10;                    Toast.makeText(this, &quot;Access denied&quot;, Toast.LENGTH_SHORT).show();&#10;                    finish();&#10;                }&#10;            });&#10;        });&#10;    }&#10;&#10;    @Override&#10;    public boolean onSupportNavigateUp() {&#10;        finish();&#10;        return true;&#10;    }&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/java/com/example/accountable/FriendControl.java">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/com/example/accountable/FriendControl.java" />
              <option name="updatedContent" value="package com.example.accountable;&#10;&#10;public class FriendControl {&#10;    private String friendName;&#10;    private String friendEmail;&#10;    private String accessCode;&#10;    private boolean hasAccess;&#10;&#10;    public FriendControl(String friendName, String friendEmail, String accessCode) {&#10;        this.friendName = friendName;&#10;        this.friendEmail = friendEmail;&#10;        this.accessCode = accessCode;&#10;        this.hasAccess = false;&#10;    }&#10;&#10;    // Getters and Setters&#10;    public String getFriendName() { return friendName; }&#10;    public String getFriendEmail() { return friendEmail; }&#10;    public String getAccessCode() { return accessCode; }&#10;    public boolean hasAccess() { return hasAccess; }&#10;    public void setHasAccess(boolean hasAccess) { this.hasAccess = hasAccess; }&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/java/com/example/accountable/FriendControlActivity.java">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/com/example/accountable/FriendControlActivity.java" />
              <option name="updatedContent" value="package com.example.accountable;&#10;&#10;import android.content.SharedPreferences;&#10;import android.os.Bundle;&#10;import android.widget.Button;&#10;import android.widget.TextView;&#10;import android.widget.Toast;&#10;import androidx.appcompat.app.AppCompatActivity;&#10;import androidx.appcompat.widget.Toolbar;&#10;import com.google.android.material.textfield.TextInputEditText;&#10;import java.util.Random;&#10;&#10;public class FriendControlActivity extends AppCompatActivity {&#10;    private static final String PREFS_NAME = &quot;AccountablePrefs&quot;;&#10;    private static final String KEY_FRIEND_NAME = &quot;friendName&quot;;&#10;    private static final String KEY_FRIEND_EMAIL = &quot;friendEmail&quot;;&#10;    private static final String KEY_ACCESS_CODE = &quot;accessCode&quot;;&#10;&#10;    private TextInputEditText friendNameInput;&#10;    private TextInputEditText friendEmailInput;&#10;    private TextView accessCodeText;&#10;    private SharedPreferences prefs;&#10;&#10;    @Override&#10;    protected void onCreate(Bundle savedInstanceState) {&#10;        super.onCreate(savedInstanceState);&#10;        setContentView(R.layout.activity_friend_control);&#10;&#10;        // Set up toolbar with back button&#10;        Toolbar toolbar = findViewById(R.id.toolbar);&#10;        setSupportActionBar(toolbar);&#10;        if (getSupportActionBar() != null) {&#10;            getSupportActionBar().setDisplayHomeAsUpEnabled(true);&#10;            getSupportActionBar().setDisplayShowHomeEnabled(true);&#10;        }&#10;&#10;        // Initialize views&#10;        friendNameInput = findViewById(R.id.friendNameInput);&#10;        friendEmailInput = findViewById(R.id.friendEmailInput);&#10;        accessCodeText = findViewById(R.id.accessCodeText);&#10;        Button generateCodeButton = findViewById(R.id.generateCodeButton);&#10;        Button saveFriendButton = findViewById(R.id.saveFriendButton);&#10;&#10;        // Initialize SharedPreferences&#10;        prefs = getSharedPreferences(PREFS_NAME, MODE_PRIVATE);&#10;&#10;        // Load saved friend data&#10;        loadFriendData();&#10;&#10;        // Set up button click listeners&#10;        generateCodeButton.setOnClickListener(v -&gt; generateAccessCode());&#10;        saveFriendButton.setOnClickListener(v -&gt; saveFriendData());&#10;    }&#10;&#10;    private void generateAccessCode() {&#10;        Random random = new Random();&#10;        String code = String.format(&quot;%06d&quot;, random.nextInt(1000000));&#10;        accessCodeText.setText(code);&#10;    }&#10;&#10;    private void loadFriendData() {&#10;        friendNameInput.setText(prefs.getString(KEY_FRIEND_NAME, &quot;&quot;));&#10;        friendEmailInput.setText(prefs.getString(KEY_FRIEND_EMAIL, &quot;&quot;));&#10;        accessCodeText.setText(prefs.getString(KEY_ACCESS_CODE, &quot;&quot;));&#10;    }&#10;&#10;    private void saveFriendData() {&#10;        String name = friendNameInput.getText().toString().trim();&#10;        String email = friendEmailInput.getText().toString().trim();&#10;        String code = accessCodeText.getText().toString().trim();&#10;&#10;        if (name.isEmpty() || email.isEmpty() || code.isEmpty()) {&#10;            Toast.makeText(this, &quot;Please fill all fields and generate an access code&quot;, &#10;                         Toast.LENGTH_SHORT).show();&#10;            return;&#10;        }&#10;&#10;        prefs.edit()&#10;            .putString(KEY_FRIEND_NAME, name)&#10;            .putString(KEY_FRIEND_EMAIL, email)&#10;            .putString(KEY_ACCESS_CODE, code)&#10;            .apply();&#10;&#10;        Toast.makeText(this, &quot;Friend details saved successfully!&quot;, Toast.LENGTH_SHORT).show();&#10;        finish();&#10;    }&#10;&#10;    @Override&#10;    public boolean onSupportNavigateUp() {&#10;        finish();&#10;        return true;&#10;    }&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/res/layout/activity_access_request.xml">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/res/layout/activity_access_request.xml" />
              <option name="updatedContent" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;&#10;&lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&#10;    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;&#10;    android:layout_width=&quot;match_parent&quot;&#10;    android:layout_height=&quot;match_parent&quot;&#10;    android:orientation=&quot;vertical&quot;&gt;&#10;&#10;    &lt;androidx.appcompat.widget.Toolbar&#10;        android:id=&quot;@+id/toolbar&quot;&#10;        android:layout_width=&quot;match_parent&quot;&#10;        android:layout_height=&quot;?attr/actionBarSize&quot;&#10;        android:background=&quot;?attr/colorPrimary&quot;&#10;        android:elevation=&quot;4dp&quot;&#10;        app:title=&quot;Access Request&quot;&#10;        app:titleTextColor=&quot;@android:color/white&quot;&#10;        app:theme=&quot;@style/ThemeOverlay.AppCompat.Dark.ActionBar&quot; /&gt;&#10;&#10;    &lt;LinearLayout&#10;        android:layout_width=&quot;match_parent&quot;&#10;        android:layout_height=&quot;wrap_content&quot;&#10;        android:orientation=&quot;vertical&quot;&#10;        android:padding=&quot;16dp&quot;&gt;&#10;&#10;        &lt;TextView&#10;            android:id=&quot;@+id/requestDetails&quot;&#10;            android:layout_width=&quot;match_parent&quot;&#10;            android:layout_height=&quot;wrap_content&quot;&#10;            android:textSize=&quot;18sp&quot;&#10;            android:layout_marginBottom=&quot;24dp&quot; /&gt;&#10;&#10;        &lt;com.google.android.material.textfield.TextInputLayout&#10;            android:layout_width=&quot;match_parent&quot;&#10;            android:layout_height=&quot;wrap_content&quot;&#10;            android:layout_marginBottom=&quot;24dp&quot;&#10;            android:hint=&quot;Time Allowed (minutes)&quot;&gt;&#10;&#10;            &lt;com.google.android.material.textfield.TextInputEditText&#10;                android:id=&quot;@+id/timeInput&quot;&#10;                android:layout_width=&quot;match_parent&quot;&#10;                android:layout_height=&quot;wrap_content&quot;&#10;                android:inputType=&quot;number&quot; /&gt;&#10;        &lt;/com.google.android.material.textfield.TextInputLayout&gt;&#10;&#10;        &lt;LinearLayout&#10;            android:layout_width=&quot;match_parent&quot;&#10;            android:layout_height=&quot;wrap_content&quot;&#10;            android:orientation=&quot;horizontal&quot;&gt;&#10;&#10;            &lt;Button&#10;                android:id=&quot;@+id/denyButton&quot;&#10;                android:layout_width=&quot;0dp&quot;&#10;                android:layout_height=&quot;wrap_content&quot;&#10;                android:layout_weight=&quot;1&quot;&#10;                android:layout_marginEnd=&quot;8dp&quot;&#10;                android:text=&quot;Deny&quot;&#10;                style=&quot;@style/Widget.MaterialComponents.Button.OutlinedButton&quot; /&gt;&#10;&#10;            &lt;Button&#10;                android:id=&quot;@+id/grantButton&quot;&#10;                android:layout_width=&quot;0dp&quot;&#10;                android:layout_height=&quot;wrap_content&quot;&#10;                android:layout_weight=&quot;1&quot;&#10;                android:layout_marginStart=&quot;8dp&quot;&#10;                android:text=&quot;Grant Access&quot; /&gt;&#10;        &lt;/LinearLayout&gt;&#10;    &lt;/LinearLayout&gt;&#10;&lt;/LinearLayout&gt;" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>